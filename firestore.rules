rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // SIMPLIFIED RULES FOR TESTING ONLY
    // These allow any authenticated user to create documents
    // DO NOT USE IN PRODUCTION!
    
    match /expenses/{expenseId} {
      allow read, write: if isAuthenticated();
    }
    
    match /income/{incomeId} {
      allow read, write: if isAuthenticated();
    }
    
    match /budgets/{budgetId} {
      allow read, write: if isAuthenticated();
    }
    
    match /goals/{goalId} {
      allow read, write: if isAuthenticated();
    }
    
    match /vehicles/{vehicleId} {
      allow read, write: if isAuthenticated();
    }
    
    match /houses/{houseId} {
      allow read, write: if isAuthenticated();
    }
    
    match /houseHelp/{houseHelpId} {
      allow read, write: if isAuthenticated();
    }
    
    match /healthcareInsurance/{policyId} {
      allow read, write: if isAuthenticated();
    }
    
    match /investments/{investmentId} {
      allow read, write: if isAuthenticated();
    }
    
    match /loans/{loanId} {
      allow read, write: if isAuthenticated();
    }
    
    match /creditCards/{cardId} {
      allow read, write: if isAuthenticated();
    }
    
    match /notes/{noteId} {
      allow read, write: if isAuthenticated();
    }
    
    match /recurring/{recurringId} {
      allow read, write: if isAuthenticated();
    }
    
    match /tripGroups/{groupId} {
      allow read, write: if isAuthenticated();
    }
    
    // Deny all other collections
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
